<nz-layout>
  <div>
    <nz-tabset>
      <nz-tab [nzTitle]="'PROJECT.PROJECT_INFORMATION' | translate">
        @if (project) {
          <nz-descriptions nzBordered [nzColumn]="1" *ngIf="project">
            <nz-descriptions-item [nzTitle]="'GENERAL.TITLE' | translate">
              {{ project.title }}
            </nz-descriptions-item>
            <nz-descriptions-item [nzTitle]="'GENERAL.DESCRIPTION' | translate">
              {{ project.description }}
            </nz-descriptions-item>
            <nz-descriptions-item [nzTitle]="'PROJECT.TYPE' | translate">
              {{ project.type }}
            </nz-descriptions-item>
            <nz-descriptions-item *ngIf="project.time_checkbox" [nzTitle]="'PROJECT.TIME_CHECKBOX' | translate">
              {{ 'RESULTS.BOOLEAN.' + (project.time_checkbox ? 'TRUE' : 'FALSE') | translate }}
            </nz-descriptions-item>
            <nz-descriptions-item *ngIf="project.deadline_checkbox" [nzTitle]="'PROJECT.DEADLINE_CHECKBOX' | translate">
              {{ 'RESULTS.BOOLEAN.' + (project.deadline_checkbox ? 'TRUE' : 'FALSE') | translate }}
            </nz-descriptions-item>
            <nz-descriptions-item *ngIf="project.time_limit" [nzTitle]="'GENERAL.TIME_LIMIT' | translate">
              {{ project.time_limit | date: DateFormat.TIME }}
            </nz-descriptions-item>
            <nz-descriptions-item *ngIf="project.deadline" [nzTitle]="'GENERAL.DEADLINE' | translate">
              {{ project.deadline | date: DateFormat.DATE }}
            </nz-descriptions-item>
            <nz-descriptions-item [nzTitle]="'GENERAL.CREATED' | translate">
              {{ project.created | date: DateFormat.DATE }}
            </nz-descriptions-item>
            <nz-descriptions-item [nzTitle]="'GENERAL.MODIFIED' | translate">
              {{ project.modified | date: DateFormat.DATE }}
            </nz-descriptions-item>
          </nz-descriptions>
        }
      </nz-tab>
      <nz-tab [nzTitle]="'PROJECT.SECTION_INPUTS' | translate">
        @if (project?.editList?.length) {
          <nz-descriptions nzBordered [nzColumn]="1" *ngIf="sectionInputStats">
            <nz-descriptions-item *ngIf="latestVersionNum" [nzTitle]="'PROJECT.VERSION' | translate">
              {{ latestVersionNum }}
            </nz-descriptions-item>

            <nz-descriptions-item [nzTitle]="'PROJECT.SECTION_INPUTS_STATISTICS' | translate">
              <ul class="statistics-list">
                <li *ngFor="let stat of sectionInputStats | keyvalue">{{ stat.key | translate }}: {{ stat.value }}</li>
              </ul>
            </nz-descriptions-item>
          </nz-descriptions>
        }
      </nz-tab>
      <nz-tab [nzTitle]="'PROJECT.PROJECT_JSON' | translate" class="json">
        <div class="json-container">
          @if (project) {
            <pre>{{ project | json }}</pre>
          }
        </div>
      </nz-tab>
      <nz-tab [nzTitle]="'PROJECT.PROJECT_HISTORY_JSON' | translate" class="json">
        <div class="json-container">
          @if (project) {
            <pre>{{ projectHistory | json }}</pre>
          }
        </div>
      </nz-tab>
    </nz-tabset>
    <div nz-row nzJustify="start" nzAlign="bottom" id="footerdiv">
      <div class="button-group">
        <button nz-button nzType="primary" type="submit" (click)="nextPage()">
          {{ 'PROJECT.SAVE' | translate }}
        </button>
        <button
          nz-popconfirm
          [nzPopconfirmTitle]="'GENERAL.DOWNLOAD_CONFIRMATION' | translate"
          [nzCancelText]="'GENERAL.CANCEL' | translate"
          [nzOkText]="'GENERAL.OK' | translate"
          (nzOnConfirm)="saveProjectToJson()"
          nzPopconfirmPlacement="top"
          nz-button
          nzType="default"
          type="button"
        >
          {{ 'PROJECT.DOWNLOAD_PROJECT' | translate }}
        </button>
        <button
          nz-popconfirm
          [nzPopconfirmTitle]="'GENERAL.DOWNLOAD_CONFIRMATION' | translate"
          [nzCancelText]="'GENERAL.CANCEL' | translate"
          [nzOkText]="'GENERAL.OK' | translate"
          (nzOnConfirm)="saveProjectWithHistoryToJson()"
          nzPopconfirmPlacement="top"
          nz-button
          nzType="default"
          type="button"
        >
          {{ 'PROJECT.DOWNLOAD_PROJECT_WITH_HISTORY' | translate }}
        </button>
      </div>
    </div>
  </div>
</nz-layout>
